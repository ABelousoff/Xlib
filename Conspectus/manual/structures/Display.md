## Display: информация о соединении с X-сервером

 Display - это внутренняя структура библиотеки Xlib, на которую ссылается программа пользователя при вызове функций, 
требующих обмена данных с X-сервером или функций, которым необходимы сведения о X-сервере. 
Поля этой структуры в документации не описываются и прямые обращения из программы к полям данных этой структуры запрещены.

 Ниже приведено описание некоторых полей этой структуры. Если вы хотите более подробно изучить эту структуру, посмотрите ее описание в файле Xlib.h
```C++
 int  fd;                      /* Номер порта */
 int  proto_major_version;     /* версия протокола X-сервера */
 int  proto_minor_version;     /* подверсия протокола X-сервера */
 char *vendor;                 /* производитель аппаратного обеспечения сервера */
 int  release;                 /* Версия выпуска сервера */
 char *display_name;           /* Строка, указывающая на сервер, данная программой при подключении */
 int  default_screen;          /* Экран по-умолчанию */
 int  nscreens;                /* Количество экранов на сервере */
 ```
Если программа хочет получить информацию, хранящуюся в структуре Display, она должна вызвать специально созданные для этого макро-определения:

- **ConnectionNumber(**_Display *display_**)** `Получить номер порта (значение поля fd);`
- **ProtocolVersion(**_Display *display_**)** `Получить информацию о версии протокола;`
- **ProtocolRevision(**_Display *display_**)** `Получить информацию о версии протокола;`
- **ServerVendor(**_Display *display_**)** `Получить информацию о производителе X-сервера;`
- **VendorRelease(**_Display *display_**)** `Получить информацию о версии X-сервера;`
- **DisplayString(**_Display *display_**)** `Вернуть строку, которая была использована вызовом XOpenDisplay при установлении соединения с сервером;`
- **ScreenCount(**_Display *display_**)** `Получить информацию о количестве экранов на X-сервере;`
- **DefaultScreen(**_Display *display_**)** `Получить экран, используемый по-умолчанию.`
- **RootWindow(**_Display *display, int screen_number_**)** `Получить индентификатор корневого окна для указанного дисплея и экрана.

> **Примечания:** Поле fd, исходя из описания в файле заголовков Xlib.h, содержит номер сокета. Макрос ConnectionNumber берет информацию из этого поля. Судя по возвращаемым значениям, возвращается дескриптор потока ввода-вывода, через который происходит обмен. Кодирование версии сервера определяется разработчиком. К примеру, The XFree86 project использует два младших десятичных разряда для кодирования ревизии, а старшие разряды - для кодирования версии. Таким образом версия 3.50 будет храниться в виде числа 350. Сервер, разработанный MIT X Consortium, использует для кодирования ревизии три млаших десятичных разряда.


```c++
#include<iostream>
#include<X11/Xlib.h>

int main(){

    Display *d;
    d = XOpenDisplay(NULL);
    
    /* Выводим сведения о графическом терминале */
    std::cout << "Установлено соединение с графическим терминалом." << std::endl;
    std::cout << "Номер соединения: " << ConnectionNumber(d) << std::endl;
    std::cout   << "Используется протокол версии "  
                << ProtocolVersion(d) << '.' 
                << ProtocolRevision(d) << std::endl;
    std::cout << "Разработчик сервера: " << ServerVendor(d) << std::endl;
    std::cout << "Версия сервера: " << VendorRelease(d) << std::endl;
    std::cout << "Строка соединения: [" << DisplayString(d) << "]" << std::endl;
    std::cout << "Количество экранов на сервере: " << ScreenCount(d) << std::endl;
    std::cout << "Номер экрана по-умолчанию: " << DefaultScreen(d) << std::endl;
    return 0;
}
```
