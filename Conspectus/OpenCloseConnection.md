## Открытие и закрытие соединения с X-сервером

Сначала программа X должна открыть соединение с X-сервером. Когда мы это сделаем, нам нужно будет указать адрес хоста, на котором запущен X-сервер, а также номер дисплея. Система X Window может поддерживать несколько дисплеев, подключенных к одной машине. Тем не менее, обычно есть только один такой дисплей - номер 0. Если бы мы хотели подключиться к локальному дисплею (то есть дисплею компьютера, на котором работает наша клиентская программа), мы могли бы указать отображение как «NULL». 

Чтобы подключиться к первому дисплею машины с адресом «simey», мы можем использовать адрес «simey: 0». Вот как открывается соединение:
```C++
#include<X11/Xlib>

Display *display;
display = XOpenDisplay("simey:0");
display = XOpenDisplay(NULL); // На локальной машине

if(display == NULL) //Соединение не установленно

Когда программа закончила свою работу и должна закрыть соединение с X-сервером, она делает:
XCloseDisplay(display); // Разорвать соединение
```

Это приведет бы к тому, что все окна, созданные программой (если они остались), будут автоматически закрыты сервером, а любые ресурсы, хранящиеся на сервере от имени клиентов, будут освобождены. Обратите внимание, что это не приводит к завершению нашей клиентской программы - для этого мы могли бы использовать обычную функцию `exit()`.

#### пример
```c++
#include<iostream>
#include<X11/Xlib.h>

int main(){
    Display *d;
    d = XOpenDisplay(NULL);

    if(d == NULL){
        std::cout << "Error XOpenDisplay" << std::endl;
        return 1;
    }
    //--------------


    //--------------
    XCloseDisplay(d);
    return 0;
}
```
-----------
## Проверка базовой информации о дисплее
> Как только мы открыли соединение с X-сервером, мы должны проверить некоторую основную информацию об этом:
>> какие экраны у него есть, какой размер (ширина и высота) экрана, сколько цветов он поддерживает (черный и белый? серая шкала? 256 цветов? больше?) и так далее.
```c++
    /*
     * эта переменная будет использоваться для хранения 
     * экрана «по умолчанию» X-сервера. screen
     * обычно X-сервер имеет только один экран (screen), 
     * поэтому мы заинтересованы только в нем.
     */
    int screen_num;

    /* размер экрана в пикселях. */
    int screen_width;
    int screen_height;

    /* эта переменная будет использоваться для хранения 
     * идентификатора корневого окна нашего экрана. 
     * У каждого экрана всегда есть корневое окно, 
     * которое покрывает весь экран и всегда существует.
     */
    Window root_window;

    /*
     * Эти переменные будут использоваться для хранения 
     * идентификаторов черного и белого цветов данного экрана. 
     */
    unsigned long white_pixel;
    unsigned long black_pixel;

    /*
     * Получить экран, используемый по-умолчанию.
     */
    screen_num = DefaultScreen(display);

    /*
     * Получить ширину экрана по умолчанию нашего X-сервера 
     * в пикселях.
     */
    screen_width = DisplayWidth(display, screen_num);

    /*
     * Получить ширинувысату экрана по умолчанию нашего X-сервера 
     * в пикселях.
     */
    screen_height = DisplayHeight(display, screen_num);

    /*
     * идентификатор корневого окна экрана.
     */
    root_window = RootWindow(display, screen_num);

    /*
     * Белый цвет
     * Черный цвет
     */
    white_pixel = WhitePixel(display, screen_num);
    black_pixel = BlackPixel(display, screen_num);
```
Существуют различные другие макросы для получения дополнительной информации об экране, которую вы можете найти в любой справке по `Xlib`. Есть также функциональные эквиваленты для некоторых из этих макросов (например, `XWhitePixel`, который делает то же самое, что `WhitePixel`).
